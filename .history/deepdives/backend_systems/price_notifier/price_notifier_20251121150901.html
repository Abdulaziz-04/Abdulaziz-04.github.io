<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Price Notifier with WhatsApp Alerts</title>
    <link rel="stylesheet" href="../../../assets/css/styles.css" />
  </head>

  <body class="project-detail-page">
    <header class="detail-hero">
      <a class="category-back" href="../../../projects/backend_systems.html">
        ← Back to Projects
      </a>

      <p class="category-pill">Backend & Distributed Logic</p>
      <br />

      <h1>Price Notifier with WhatsApp Alerts</h1>

      <p class="detail-summary">
        <b>
          Lightweight FastAPI service that checks live product prices on demand
          or every 6 hours, and sends WhatsApp alerts via Twilio when the price
          hits a target. Includes a simple browser UI, optional delay, Docker
          deploy, and multi-URL tracking via CSV.
        </b>
      </p>

      <ul class="detail-meta">
        <li>
          <strong>Tech Stack:</strong> FastAPI, BeautifulSoup, requests, Twilio
          API, uvicorn, React, Docker, Heroku
        </li>
      </ul>
    </header>

    <main class="section detail-content">
      <!-- HERO IMAGE -->
      <section class="detail-section detail-hero-gif">
        <figure class="gallery-item gallery-item--wide">
          <img
            src="./images/intro.png"
            alt="Price notifier UI"
            style="display: block; margin: 0 auto; max-width: 90%; height: auto"
          />
          <figcaption style="text-align: center">
            UI for submitting product URL, target price, optional delay, and
            seeing JSON responses from the API.
          </figcaption>
        </figure>
      </section>

      <!-- QUICK INSIGHTS -->
      <section class="detail-section">
        <h2>Quick insights</h2>
        <ul class="psr-list">
          <li>
            <strong>Purpose:</strong> Automates price checks and sends WhatsApp
            alerts when a target is reached.
          </li>
          <br />
          <li>
            <strong>Inputs:</strong> Product URL, target price, optional delay,
            optional custom WhatsApp recipient.
          </li>
          <br />
          <li>
            <strong>Automation:</strong> Background task re-checks all saved
            URLs every 6 hours and alerts if thresholds are met.
          </li>
        </ul>
      </section>

      <!-- FEATURES -->
      <section class="detail-section">
        <h2>Features</h2>
        <ul>
          <li>Fetches live product price via BeautifulSoup scraping.</li>
          <br />
          <li>
            Compares price vs target and sends WhatsApp alerts via Twilio.
          </li>
          <br />
          <li>Supports delayed notifications (up to 24 hours).</li>
          <br />
          <li>
            Tracks multiple items in a CSV, for lightweight and personal use.
          </li>
        </ul>
      </section>

      <!-- API & LOGIC -->
      <section class="detail-section">
        <h2>API & core logic</h2>

        <p>FastAPI project exposes three simple endpoints:</p>

        <pre
          class="code-bordered"
        ><code>GET /               → serves the static UI
GET /api/health     → {"status":"ok"}
POST /api/notify    → { url, target_price, delay_minutes?, send_to? }</code></pre>

        <p>Price extraction and alert logic stays minimal and robust:</p>

        <div class="code-grid">
          <div class="code-block">
            <p class="code-block__title">Price parsing</p>
            <div class="code-card">
              <pre><code>def extract_price(html):
    soup = BeautifulSoup(html, "html.parser")
    for key in ["priceblock_ourprice",
                "priceblock_dealprice",
                "priceblock_saleprice"]:
        tag = soup.find(id=key)
        if tag:
            return parse_number(tag.text)
    return fallback_numeric_parse(soup.get_text(" ", strip=True))</code></pre>
            </div>
          </div>

          <div class="code-block">
            <p class="code-block__title">Alert decision</p>
            <div class="code-card">
              <pre><code>if price <= target_price:
    if delay:
        asyncio.create_task(send_after_delay(delay, payload))
    else:
        sid = send_whatsapp(payload, price)
</code></pre>
            </div>
          </div>
        </div>

        <p>
          If Twilio credentials or price parsing fails, FastAPI returns clean
          4xx/5xx JSON responses with explanations.
        </p>
      </section>

      <!-- DEPLOYMENT -->
      <section class="detail-section">
        <h2>Deployment & automation</h2>
        <ul>
          <li>Dockerized app deployed on Heroku via container registry.</li>
          <br />
          <li>
            Background task reloads the CSV and checks all URLs every 6 hours.
          </li>
          <br />
          <li>
            Static UI served directly through FastAPI with zero CORS
            complications.
          </li>
        </ul>
      </section>

      <!-- GALLERY -->
      <section class="detail-section detail-gallery">
        <h2>WhatsApp alert snapshot</h2>

        <div class="gallery-row gallery-row--one">
          <figure class="gallery-item gallery-item--wide">
            <a href="./images/notify.jpg" target="_blank">
              <img
                src="./images/notify.jpg"
                alt="WhatsApp alert showcasing price trigger"
              />
            </a>
            <figcaption>
              Example WhatsApp alert sent when the price dropped below target.
            </figcaption>
          </figure>
        </div>
      </section>
    </main>
  </body>
</html>
